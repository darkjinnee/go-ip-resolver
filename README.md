# Go IP Resolver

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ IP –∞–¥—Ä–µ—Å–æ–≤ –¥–æ–º–µ–Ω–æ–≤ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –¥–æ–º–µ–Ω–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–∑–æ–ª–≤–∏–Ω–≥ IP –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–æ–≤
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –≥—Ä—É–ø–ø—ã –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ JSON —Ñ–∞–π–ª
- HTTP API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ç–∞–π–º–∞—É—Ç—ã DNS –∑–∞–ø—Ä–æ—Å–æ–≤
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç**
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É IP (IPv4/IPv6)**
- **–ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ cmd/ip-resolver/          # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ cache/               # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
‚îÇ   ‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ resolver/            # DNS —Ä–µ–∑–æ–ª–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ transport/           # HTTP —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
‚îú‚îÄ‚îÄ configs/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ domains.json         # –ì—Ä—É–ø–ø—ã –¥–æ–º–µ–Ω–æ–≤
‚îú‚îÄ‚îÄ postman/                 # Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ Go-IP-Resolver.postman_collection.json
‚îÇ   ‚îú‚îÄ‚îÄ Go-IP-Resolver-Environment.postman_environment.json
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Postman
‚îú‚îÄ‚îÄ bin/                     # –°–æ–±—Ä–∞–Ω–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
‚îî‚îÄ‚îÄ Makefile                 # –ö–æ–º–∞–Ω–¥—ã —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–±–æ—Ä–∫–∞

```bash
make build
```

### –ó–∞–ø—É—Å–∫

```bash
make run
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
make run-dev
```

### –î—Ä—É–≥–∏–µ –∫–æ–º–∞–Ω–¥—ã

```bash
make test      # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
make clean     # –û—á–∏—Å—Ç–∫–∞
make deps      # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make fmt       # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make lint      # –õ–∏–Ω—Ç–∏–Ω–≥
make check     # –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–æ–º–µ–Ω—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `configs/domains.json`:

```json
{
  "youtube": [
    "youtube.com",
    "www.youtube.com",
    "m.youtube.com"
  ],
  "google": [
    "google.com",
    "www.google.com"
  ]
}
```

## API

### –ü–æ–ª—É—á–∏—Ç—å IP –∞–¥—Ä–µ—Å–∞ –¥–ª—è –≥—Ä—É–ø–ø—ã –¥–æ–º–µ–Ω–æ–≤

```
GET /resolve?group=<group_name>&type=<ip_type>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `group` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –¥–æ–º–µ–Ω–æ–≤
- `type` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - —Ç–∏–ø IP –∞–¥—Ä–µ—Å–æ–≤: `ipv4`, `ipv6` –∏–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –í—Å–µ IP –∞–¥—Ä–µ—Å–∞
curl "http://localhost:8080/resolve?group=youtube"

# –¢–æ–ª—å–∫–æ IPv4
curl "http://localhost:8080/resolve?group=youtube&type=ipv4"

# –¢–æ–ª—å–∫–æ IPv6
curl "http://localhost:8080/resolve?group=youtube&type=ipv6"
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "domain": "youtube.com",
    "ips": ["142.250.191.78", "2a00:1450:4010:c0a::65"]
  },
  {
    "domain": "www.youtube.com", 
    "ips": ["142.250.191.78", "2a00:1450:4010:c0a::65"]
  }
]
```

### –ü–æ–ª—É—á–∏—Ç—å IP –∞–¥—Ä–µ—Å–∞ –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø —Å—Ä–∞–∑—É

```
GET /resolve-all?type=<ip_type>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `type` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - —Ç–∏–ø IP –∞–¥—Ä–µ—Å–æ–≤: `ipv4`, `ipv6` –∏–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –í—Å–µ IP –∞–¥—Ä–µ—Å–∞
curl "http://localhost:8080/resolve-all"

# –¢–æ–ª—å–∫–æ IPv4
curl "http://localhost:8080/resolve-all?type=ipv4"

# –¢–æ–ª—å–∫–æ IPv6
curl "http://localhost:8080/resolve-all?type=ipv6"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "youtube": [
    {
      "domain": "youtube.com",
      "ips": ["142.250.191.78", "2a00:1450:4010:c0a::65"]
    }
  ],
  "google": [
    {
      "domain": "google.com", 
      "ips": ["142.250.191.78", "2a00:1450:4010:c0a::65"]
    }
  ]
}
```

### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥—Ä—É–ø–ø

```
GET /groups
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl "http://localhost:8080/groups"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "groups": ["youtube", "google", "github"]
}
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫—ç—à–∞

```
GET /cache/stats
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
curl "http://localhost:8080/cache/stats"
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "groups_count": 3,
  "total_entries": 9,
  "groups": {
    "youtube": 3,
    "google": 3,
    "github": 3
  }
}
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

- `-config` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `configs/domains.json`)
- `-addr` - –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `:8080`)
- `-timeout` - —Ç–∞–π–º–∞—É—Ç DNS –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `2s`)
- `-cache-ttl` - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫—ç—à–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `15m`)
- `-update-interval` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—ç—à–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10m`)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
./bin/ip-resolver -config /path/to/config.json -addr :9090

# –ó–∞–ø—É—Å–∫ —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º
./bin/ip-resolver -timeout 10s
```

## Curl
```bash
$ sudo curl -L "https://github.com/darkjinnee/go-ip-resolver/releases/download/v1.0.0/ip-resolver-linux" -o /usr/local/bin/go-ip-resolver 
$ sudo chmod +x /usr/local/bin/go-ip-resolver
```

## Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è

–î–ª—è —É–¥–æ–±–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –≤–∫–ª—é—á–µ–Ω–∞ –≥–æ—Ç–æ–≤–∞—è Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è:

### üìÅ –§–∞–π–ª—ã
- `postman/Go-IP-Resolver.postman_collection.json` - –ö–æ–ª–ª–µ–∫—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- `postman/Go-IP-Resolver-Environment.postman_environment.json` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `postman/README.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üöÄ –ë—ã—Å—Ç—Ä—ã–π –∏–º–ø–æ—Ä—Ç
1. –û—Ç–∫—Ä–æ–π—Ç–µ Postman
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –æ–±–∞ JSON —Ñ–∞–π–ª–∞ –∏–∑ –ø–∞–ø–∫–∏ `postman/`
3. –í—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ "Go IP Resolver Environment"
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `make run`
5. –ì–æ—Ç–æ–≤–æ! –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### üìã –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ
- ‚úÖ –í—Å–µ API endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤—Å–µ—Ö –≥—Ä—É–ø–ø –¥–æ–º–µ–Ω–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ IPv4/IPv6
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [postman/README.md](postman/README.md)
Microservice that periodically resolves IP addresses for specified domains (e.g., YouTube, Telegram, or other blocked services).
